<div class="row">
    <div class="col-8 align-items-center">
        <h5 mat-dialog-title class="mt-0 mb-1">{{(rowId)?'Edit' : 'New'}}</h5>
    </div>
    <div class="col-4 text-right align-items-top">
        <button mat-ripple (click)="close()" class="btn btn-danger btn-xs float-end" type="button"><i
                class="mdi mdi-close"></i></button>
    </div>
</div>
<hr class="my-1">
<div class="row">
    <div class="col-md-12">
        <mat-tab-group>
            <mat-tab label="Details">
                <form [formGroup]="form" (ngSubmit)="submit()" class="my-4">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <input class="form-control" type="text" id="name" formControlName="firstName"
                                    placeholder="First Name">
                                <vmessage field="firstName" [control]="form.controls['firstName']"></vmessage>
                            </div>
                            <div class="mb-3">
                                <input type="text" class="form-control" formControlName="lastName"
                                    placeholder="Last Name">
                                <vmessage field="lastName" [control]="form.controls['lastName']"></vmessage>
                            </div>
                            <div class="mb-3">
                                <input type="text"  class="form-control" formControlName="userName"
                                    placeholder="User Name">
                                <vmessage field="userName" [control]="form.controls['userName']"></vmessage>
                            </div>
                            <div class="mb-3"  >
                                <input type="password" id="password" class="form-control" formControlName="password"
                                    placeholder="Password" *ngIf="rowId== null">
                                <vmessage field="password" [control]="form.controls['password']"></vmessage>
                            </div>
                            <div class="mb-3">
                                <input type="password" id="password" class="form-control" formControlName="confirmPassword" placeholder="Confirm Password" *ngIf="rowId== null">
                                <vmessage field="confirmPassword" [control]="form.controls['confirmPassword']"></vmessage>
                            </div>
                            <div class="mb-3">
                                <input class="form-control" type="email" id="emailaddress"
                                    formControlName="emailAddress" placeholder="Email Address">
                                <vmessage field="emailAddress" [control]="form.controls['emailAddress']"></vmessage>
                            </div>

                            <div class="form-check mt-3 mb-3 mb-lg-0 mb-md-0">
                                <input class="form-check-input" type="checkbox" value="active" formControlName="active" id="flexCheckDefault" checked>
                                <label class="form-check-label" for="flexCheckDefault" >
                                    Active
                                </label>
                            </div>

                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <input class="form-control" type="tel" formControlName="telephoneNumber"
                                    placeholder="Tel No">
                                <vmessage field="telephoneNumber" [control]="form.controls['telephoneNumber']">
                                </vmessage>
                            </div>
                            <div class="mb-3">
                                <input type="tel" class="form-control" formControlName="contactNumber"
                                    placeholder="Cell No">
                                <vmessage field="contactNumber" [control]="form.controls['contactNumber']"></vmessage>
                            </div>
                            <div class="mb-3">
                                <input type="numer" id="password" class="form-control" formControlName="code"
                                    placeholder="Code">
                                <vmessage field="code" [control]="form.controls['code']"></vmessage>
                            </div>
                            <div class="mb-3">
                                <input type="text" id="text" class="form-control" formControlName="title"
                                    placeholder="Title">
                                <vmessage field="title" [control]="form.controls['title']"></vmessage>
                            </div>
                            <div class="mb-3">
                                <input type="text"  class="form-control" formControlName="pastelUserId"
                                    placeholder="Pastel User ID">
                                <vmessage field="pastelUserId" [control]="form.controls['pastelUserId']"></vmessage>
                            </div>
                            <div>
                                <lb-auto-complete appearance="outline" placeholder="Role" [multiple]="true"
                                    [clear]="true" [fControl]="form.controls['role']" [options]="selectRole">
                                </lb-auto-complete>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <button class="btn btn-primary float-end">{{(rowId)?"Update":"Save"}}</button>
                        </div>
                    </div>
                </form>
            </mat-tab>
            <mat-tab label="Linked Contacts" *ngIf="rowId">
                <form [formGroup]="linkedcontact" (ngSubmit)="lowerform()">
                    <div class="row my-2">
                        <div class="col-md-12">
                            <h4>Add Linked Contact</h4>
                        </div>
                    </div>

                    <div class="row mb-4">
                        <div class="col-md-4">
                            <input type="text"  class="form-control" formControlName="name" placeholder="Name">
                            <vmessage field="name" [control]="linkedcontact.controls['name']">
                            </vmessage>
                        </div>
                        <div class="col-md-4 my-2 my-lg-0 my-md-0">
                            <input type="email"  class="form-control" formControlName="email"
                                placeholder="Email Address">
                            <vmessage field="email" [control]="linkedcontact.controls['email']">
                            </vmessage>
                        </div>
                        <div class="col-md-4">
                            <input type="tel"  class="form-control" formControlName="contactNo"
                                placeholder="Contact Number">
                            <vmessage field="contactNo" [control]="linkedcontact.controls['contactNo']">
                            </vmessage>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <button class="btn btn-primary float-end">{{(linkContactId)?"Update":"Save"}}</button>
                        </div>
                    </div>
                </form>
                <div class="responsive-table-plugin">
                    <div class="table-rep-plugin">
                        <div class="table-responsive" data-pattern="priority-columns">
                            <table id="tech-companies-1" class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Email</th>
                                        <th>Contact No.</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let items of linkedContacts">
                                        <th>{{items.name}}</th>
                                        <td>{{items.email}}</td>
                                        <td>{{items.contactNo}}</td>
                                        <td style="min-width: 120px;">
                                            <button class="btn btn-warning btn-xs" (click)="editLinkedUser(items.id)"><i class="fe-edit text-white"></i>
                                            </button>
                                            <button class="btn btn-danger btn-xs ms-1 " (click)="deleteLinkedUser(items.id)"><i
                                                    class="fe-trash-2 text-white"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                </div>
            </mat-tab>

        </mat-tab-group>
    </div>
</div>